# 상용 클라우드 환경에 배포하기
## 1. 배포를 위한 AWS Cloud 환경 구성하기
### AWS Cloud 실습 환경 구성도
<img src="https://github.com/hyewon218/Building-CI-CD-pipelines-with-Jenkins/assets/126750615/6307cd50-e621-4303-be06-8b07511ab845" width="60%"/><br>
- Jenkins에서 빌드 후 Tomcat 서버나, Docker 서버에 배포를 진행

<img src="https://github.com/hyewon218/Building-CI-CD-pipelines-with-Jenkins/assets/126750615/28d5b963-274d-4a07-9390-55b8c10b1852" width="60%"/><br>
- Jenkins에서 빌드한 결과물을 Ansible 에 전달하여 Tomcat 서버, Docker 서버, sonarQube 서버에 배포를 진행
- AWS EC2 구성
    - Jenkins server: **8080** port
    - Docker server: 22 port
    - Tomcat server: **8080** port
    - Ansible server: 22 port
    - SOnarqube server: **9000** port

<br>

## 2. 이미지를 이용하여 AWS EC2 생성하기
<img src="https://github.com/hyewon218/Building-CI-CD-pipelines-with-Jenkins/assets/126750615/a2cffd44-09b5-4047-8cfb-25ebf89132e3" width="60%"/><br>
- 이미지를 public 상태로 만들게되면 공유할 수 있다.
- 생성된 이미지를 통해 기본 시스템(java11, ...)이 설치된 인스턴스를 쉽게 만들 수 있다.

<img src="https://github.com/hyewon218/Building-CI-CD-pipelines-with-Jenkins/assets/126750615/15bd6890-4889-4594-aef3-269a9652d71e" width="60%"/><br>
다 같은 VPC(가상 네트워크) ID

- 이렇게 만든 5개의 인스턴스는 같은 네트워크에 묶여있기 때문에 동일한 VPC ID를 갖는다.
- VPC(Virtual Private Cloud)는 기존의 가상 사설 네트워크망을 구성할 때 VPN 이라는 용어를 사용하는데 AWS 에서는 사설 네트워크망을 클라우드 형태로 사용하고 있기 때문에 VPC 라고한다.
- VPC 는 가상 네트워크이기 때문에, 가상 네트워크에 묶여있는 PC 들간의 통신을 할 때 아무런 제약이 없다.
- 따라서 이제는 각 PC 통신 간에 private IP 를 통해서 통신이 가능하다.